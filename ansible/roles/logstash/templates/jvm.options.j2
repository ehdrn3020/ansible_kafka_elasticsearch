# ==============================================
# Logstash JVM Options - Java 11 Compatible
# Generated by Ansible on {{ ansible_date_time.iso8601 }}
# ==============================================

# Heap size configuration
-Xmx1g
-Xms1g

# Garbage Collection - G1GC (recommended for Java 11+)
-XX:+UseG1GC
-XX:MaxGCPauseMillis=200
-XX:G1HeapRegionSize=16m

# GC logging for Java 11+ (unified logging format)
-Xlog:gc*:{{ logstash_log_dir }}/gc.log:time,level,tags

# Direct memory limit
-XX:MaxDirectMemorySize=512m

# Heap dump configuration
-XX:+HeapDumpOnOutOfMemoryError
-XX:HeapDumpPath={{ logstash_log_dir }}/heapdump.hprof

# Basic JVM options
-Djava.awt.headless=true
-Dfile.encoding=UTF-8
-Djdk.io.File.enableADS=true

# JRuby specific options
-Djruby.compile.invokedynamic=true
-Djruby.jit.threshold=0
-Djruby.regexp.interruptible=true

# Security and random number generation
-Djava.security.egd=file:/dev/urandom

# Log4j2 configuration
-Dlog4j2.isThreadContextMapInheritable=true

# Performance optimizations
-XX:+UnlockExperimentalVMOptions
-XX:+UseStringDeduplication

# Error handling
-XX:+ExitOnOutOfMemoryError 