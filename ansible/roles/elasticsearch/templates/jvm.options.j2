# ================================================================
# Elasticsearch JVM Options - Java 11 Compatible
# Generated by Ansible on {{ ansible_date_time.iso8601 }}
# ================================================================

# Heap size configuration - Minimal for testing/development
-Xmx512m
-Xms512m

# Garbage Collection - G1GC (recommended for Elasticsearch)
-XX:+UseG1GC
-XX:MaxGCPauseMillis=200
-XX:G1HeapRegionSize=16m

# GC logging for Java 11+ (unified logging format)
-Xlog:gc*:{{ elasticsearch_log_dir }}/gc.log:time,level,tags

# Direct memory limit
-XX:MaxDirectMemorySize=256m

# Heap dump configuration
-XX:+HeapDumpOnOutOfMemoryError
-XX:HeapDumpPath={{ elasticsearch_log_dir }}/heapdump.hprof

# Basic JVM options
-Des.enforce.bootstrap.checks=true
-Dfile.encoding=UTF-8
-Djna.nosys=true
-Djdk.io.permissionsUseCanonicalPath=true
-Dlog4j.shutdownHookEnabled=false
-Dlog4j2.disable.jmx=true

# Network and security
-Djava.net.preferIPv4Stack=true

# Elasticsearch specific paths
-Des.path.home={{ elasticsearch_home }}
-Des.path.conf={{ elasticsearch_home }}/config

# Performance optimizations for minimal resources
-XX:+UnlockExperimentalVMOptions
-XX:+UseStringDeduplication

# Error handling
-XX:+ExitOnOutOfMemoryError